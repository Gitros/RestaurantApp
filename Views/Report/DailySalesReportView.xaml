<UserControl x:Class="RestaurantApp.Views.DailySalesReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:shared="clr-namespace:RestaurantApp.Views.Shared">

	<shared:ListPageShell Title="Raport: Sprzedaż dzienna"
                      CountText="{Binding Rows.Count, StringFormat='Wierszy: {0}'}">

		<!-- TOOLBAR zostaje jak masz -->

		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<!-- KAFELKI PODSUMOWAŃ -->
			<UniformGrid Grid.Row="0" Columns="4" Margin="0,0,0,10">
				<Border Margin="0,0,10,0" Padding="10" CornerRadius="8" Background="#FFF7F7F7" BorderBrush="#22000000" BorderThickness="1">
					<StackPanel>
						<TextBlock Text="Suma przychodu" Foreground="Gray"/>
						<TextBlock Text="{Binding TotalRevenue, StringFormat={}{0:C}}" FontSize="18" FontWeight="SemiBold"/>
					</StackPanel>
				</Border>

				<Border Margin="0,0,10,0" Padding="10" CornerRadius="8" Background="#FFF7F7F7" BorderBrush="#22000000" BorderThickness="1">
					<StackPanel>
						<TextBlock Text="Liczba zamówień" Foreground="Gray"/>
						<TextBlock Text="{Binding TotalOrders}" FontSize="18" FontWeight="SemiBold"/>
					</StackPanel>
				</Border>

				<Border Margin="0,0,10,0" Padding="10" CornerRadius="8" Background="#FFF7F7F7" BorderBrush="#22000000" BorderThickness="1">
					<StackPanel>
						<TextBlock Text="Śr. rachunek (całość)" Foreground="Gray"/>
						<TextBlock Text="{Binding AvgOrderValueAll, StringFormat={}{0:C}}" FontSize="18" FontWeight="SemiBold"/>
					</StackPanel>
				</Border>

				<Border Padding="10" CornerRadius="8" Background="#FFF7F7F7" BorderBrush="#22000000" BorderThickness="1">
					<StackPanel>
						<TextBlock Text="Śr. przychód / dzień" Foreground="Gray"/>
						<TextBlock Text="{Binding AvgDailyRevenue, StringFormat={}{0:C}}" FontSize="18" FontWeight="SemiBold"/>
					</StackPanel>
				</Border>
			</UniformGrid>

			<!-- DATA + SZCZEGÓŁY -->
			<Grid Grid.Row="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="3*"/>
					<ColumnDefinition Width="16"/>
					<ColumnDefinition Width="2*"/>
				</Grid.ColumnDefinitions>

				<DataGrid Grid.Column="0"
						  ItemsSource="{Binding Rows}"
						  SelectedItem="{Binding SelectedRow}"
						  IsReadOnly="True"
						  CanUserSortColumns="True">
					<DataGrid.Columns>
						<DataGridTextColumn Header="Data" Binding="{Binding Date, StringFormat=\{0:yyyy-MM-dd\}}" Width="150" />
						<DataGridTextColumn Header="Zamówienia" Binding="{Binding OrdersCount}" Width="110" />
						<DataGridTextColumn Header="Przychód" Binding="{Binding Revenue, StringFormat=\{0:C\}}" Width="140" />
						<DataGridTextColumn Header="Średni rachunek" Binding="{Binding AvgOrderValue, StringFormat=\{0:C\}}" Width="160" />
					</DataGrid.Columns>
				</DataGrid>

				<Border Grid.Column="2" Padding="12" CornerRadius="8" Background="#FFF7F7F7" BorderBrush="#22000000" BorderThickness="1">
					<StackPanel>
						<TextBlock Text="Szczegóły dnia" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,10"/>

						<TextBlock Text="Data" Foreground="Gray"/>
						<TextBlock Text="{Binding SelectedDateText}" FontSize="14" Margin="0,0,0,8"/>

						<TextBlock Text="Zamówienia" Foreground="Gray"/>
						<TextBlock Text="{Binding SelectedOrdersText}" FontSize="14" Margin="0,0,0,8"/>

						<TextBlock Text="Przychód" Foreground="Gray"/>
						<TextBlock Text="{Binding SelectedRevenueText}" FontSize="14" Margin="0,0,0,8"/>

						<TextBlock Text="Średni rachunek" Foreground="Gray"/>
						<TextBlock Text="{Binding SelectedAvgText}" FontSize="14"/>
					</StackPanel>
				</Border>
			</Grid>
		</Grid>
	</shared:ListPageShell>
</UserControl>
